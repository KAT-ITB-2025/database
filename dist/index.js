import {pgEnum,pgTable,timestamp,text,date}from'drizzle-orm/pg-core';import {init}from'@paralleldrive/cuid2';import {relations}from'drizzle-orm';var m=init({length:8}),t=()=>new Date;var N=pgEnum("account_role_enum",["admin","mamet","mentor","user","guest"]),i=pgTable("account",{id:text("id").primaryKey(),nim:text("nim").notNull().unique(),password:text("password").notNull(),role:N("role").default("user").notNull(),createdAt:timestamp("created_at").defaultNow(),updatedAt:timestamp("updated_at").$onUpdate(t)}),D=relations(i,({one:p})=>({user:p(r)}));var r=pgTable("user",{id:text("id").primaryKey().references(()=>i.id),nim:text("nim").notNull().unique(),email:text("email").unique(),fullName:text("full_name"),birthDate:date("birth_date"),phoneNumber:text("phone_number"),idLine:text("id_line"),idDiscord:text("id_discord"),idInstagram:text("id_instagram"),createdAt:timestamp("created_at").defaultNow(),updatedAt:timestamp("updated_at").$onUpdate(t)});var w=pgEnum("media_bucket_enum",["core","oskm","dikpus","profile","submission-dikpus","submission-oskm","other"]),F=pgTable("media",{id:text("id").primaryKey().$defaultFn(m),creatorId:text("creator_id").references(()=>r.id,{onDelete:"cascade"}).notNull(),name:text("name").unique().notNull(),bucket:w("bucket").notNull().default("other"),type:text("type").notNull(),url:text("url").notNull(),updatedAt:timestamp("updated_at",{withTimezone:true}).notNull().$onUpdate(t),createdAt:timestamp("created_at",{withTimezone:true}).notNull().defaultNow()});export{i as account,D as accountRelation,N as accountRoleEnum,F as media,w as mediaBucketEnum,r as user};